(this["webpackJsonpsocketio-chat-app"]=this["webpackJsonpsocketio-chat-app"]||[]).push([[0],{313:function(e,t,a){e.exports=a(569)},318:function(e,t,a){},320:function(e,t,a){},321:function(e,t,a){},370:function(e,t){},503:function(e,t,a){},504:function(e,t,a){},510:function(e,t,a){},569:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),s=a.n(o),i=(a(318),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function c(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(319);var l=a(24),u=a(25),m=a(27),p=a(26),h=a(28),g=a(76),d=a(44),f=(a(320),a(31)),y=a(74),b=a(616),L=a(620),U=a(613),j=a(621),w=a(627),E=a(618),v=a(570),M=a(611),N=a(612),C=a(285),O=a.n(C),I=a(617),k=a(150),D=a(7),S=a(322),x=a(270),R=a.n(x),T=(a(321),{purpleAvatar:{margin:10,color:"#fff",backgroundColor:R.a[500]}});var z=Object(D.a)(T)((function(e){var t=e.classes,a=e.loginUser.isLoginUser.img;return a?r.a.createElement("img",{src:a,alt:"User Image",className:"user-img"}):r.a.createElement(S.a,{className:t.purpleAvatar},"OP")})),A=a(36),B=a(610),P=a(40),Y=a(48),G=a.n(Y),Q=a(93),Z=a.n(Q),F=Z()("https://slashchat.herokuapp.com/"),J="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgNTMgNTMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUzIDUzOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBzdHlsZT0iZmlsbDojRTdFQ0VEOyIgZD0iTTE4LjYxMyw0MS41NTJsLTcuOTA3LDQuMzEzYy0wLjQ2NCwwLjI1My0wLjg4MSwwLjU2NC0xLjI2OSwwLjkwM0MxNC4wNDcsNTAuNjU1LDE5Ljk5OCw1MywyNi41LDUzDQoJYzYuNDU0LDAsMTIuMzY3LTIuMzEsMTYuOTY0LTYuMTQ0Yy0wLjQyNC0wLjM1OC0wLjg4NC0wLjY4LTEuMzk0LTAuOTM0bC04LjQ2Ny00LjIzM2MtMS4wOTQtMC41NDctMS43ODUtMS42NjUtMS43ODUtMi44ODh2LTMuMzIyDQoJYzAuMjM4LTAuMjcxLDAuNTEtMC42MTksMC44MDEtMS4wM2MxLjE1NC0xLjYzLDIuMDI3LTMuNDIzLDIuNjMyLTUuMzA0YzEuMDg2LTAuMzM1LDEuODg2LTEuMzM4LDEuODg2LTIuNTN2LTMuNTQ2DQoJYzAtMC43OC0wLjM0Ny0xLjQ3Ny0wLjg4Ni0xLjk2NXYtNS4xMjZjMCwwLDEuMDUzLTcuOTc3LTkuNzUtNy45NzdzLTkuNzUsNy45NzctOS43NSw3Ljk3N3Y1LjEyNg0KCWMtMC41NCwwLjQ4OC0wLjg4NiwxLjE4NS0wLjg4NiwxLjk2NXYzLjU0NmMwLDAuOTM0LDAuNDkxLDEuNzU2LDEuMjI2LDIuMjMxYzAuODg2LDMuODU3LDMuMjA2LDYuNjMzLDMuMjA2LDYuNjMzdjMuMjQNCglDMjAuMjk2LDM5Ljg5OSwxOS42NSw0MC45ODYsMTguNjEzLDQxLjU1MnoiLz4NCjxnPg0KCTxwYXRoIHN0eWxlPSJmaWxsOiM1NTYwODA7IiBkPSJNMjYuOTUzLDAuMDA0QzEyLjMyLTAuMjQ2LDAuMjU0LDExLjQxNCwwLjAwNCwyNi4wNDdDLTAuMTM4LDM0LjM0NCwzLjU2LDQxLjgwMSw5LjQ0OCw0Ni43Ng0KCQljMC4zODUtMC4zMzYsMC43OTgtMC42NDQsMS4yNTctMC44OTRsNy45MDctNC4zMTNjMS4wMzctMC41NjYsMS42ODMtMS42NTMsMS42ODMtMi44MzV2LTMuMjRjMCwwLTIuMzIxLTIuNzc2LTMuMjA2LTYuNjMzDQoJCWMtMC43MzQtMC40NzUtMS4yMjYtMS4yOTYtMS4yMjYtMi4yMzF2LTMuNTQ2YzAtMC43OCwwLjM0Ny0xLjQ3NywwLjg4Ni0xLjk2NXYtNS4xMjZjMCwwLTEuMDUzLTcuOTc3LDkuNzUtNy45NzcNCgkJczkuNzUsNy45NzcsOS43NSw3Ljk3N3Y1LjEyNmMwLjU0LDAuNDg4LDAuODg2LDEuMTg1LDAuODg2LDEuOTY1djMuNTQ2YzAsMS4xOTItMC44LDIuMTk1LTEuODg2LDIuNTMNCgkJYy0wLjYwNSwxLjg4MS0xLjQ3OCwzLjY3NC0yLjYzMiw1LjMwNGMtMC4yOTEsMC40MTEtMC41NjMsMC43NTktMC44MDEsMS4wM1YzOC44YzAsMS4yMjMsMC42OTEsMi4zNDIsMS43ODUsMi44ODhsOC40NjcsNC4yMzMNCgkJYzAuNTA4LDAuMjU0LDAuOTY3LDAuNTc1LDEuMzksMC45MzJjNS43MS00Ljc2Miw5LjM5OS0xMS44ODIsOS41MzYtMTkuOUM1My4yNDYsMTIuMzIsNDEuNTg3LDAuMjU0LDI2Ljk1MywwLjAwNHoiLz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjwvc3ZnPg0K",W=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={chatUsers:[],roomId:null},a.postNewRoom=function(e){var t=a.props.IsUserLoginReducer.isLoginUser,n=t.email,r=t.username,o=t.img,s=Math.random().toString().substring(2,14),i={roomId:s,currentUserEmail:n,currentUsername:r,currentUserImg:o||J,oppUserEmail:e.email,oppUsername:e.username,oppUserImg:e.img||J,timestamp:new Date};a.setState({roomId:s},(function(){a.props.getRoomId(Object(f.a)({},i))})),G.a.post("https://slashchat.herokuapp.com/rooms",{userRoom:i}).then((function(e){})).catch((function(e){console.log(e)}))},a.comparingUsers=function(e,t){var n=!1,r=a.props.IsUserLoginReducer.isLoginUser,o=r.email,s=r.username,i=r.img;t.data.forEach((function(t){e.email!==t.oppUserEmail&&e.email!==t.currentUserEmail||o!==t.currentUserEmail&&o!==t.oppUserEmail||(a.setState({roomId:t.roomId},(function(){a.props.getRoomId({roomId:t.roomId,currentUserEmail:o,currentUsername:s,currentUserImg:i||J,oppUserEmail:e.email,oppUsername:e.username,oppUserImg:e.img||J})})),n=!0)})),n||a.postNewRoom(e)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleCreateRoom",value:function(e){var t=this;this.props.targetedUser(e),e.group?(this.setState({roomId:e.roomId}),this.props.getRoomId({roomId:e.roomId,groupName:e.groupName})):G.a.get("https://slashchat.herokuapp.com/rooms").then((function(a){a.data.length?t.comparingUsers(e,a):t.postNewRoom(e)})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.IsUserLoginReducer,n=t.BackUpUserRoomReducer;F.on("newGroupCreatedMessage",(function(t){t.msg.userGroup.forEach((function(n){a.isLoginUser.email===n.email&&e.setState((function(e){return{chatUsers:[].concat(Object(A.a)(e.chatUsers),[t.msg])}}))}))})),n&&this.setState({roomId:n.backUpUserRoom.roomId}),G.a.get("https://slashchat.herokuapp.com/chatusers").then((function(t){e.setState({chatUsers:Object(A.a)(t.data)},(function(){G.a.get("https://slashchat.herokuapp.com/groupRooms").then((function(t){var n=[];t.data.forEach((function(e){return e.userGroup.forEach((function(t){t._id===a.isLoginUser._id&&n.push(e)}))})),e.setState((function(e){return{chatUsers:[].concat(Object(A.a)(e.chatUsers),n)}}))})).catch((function(e){console.log(e)}))}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.IsUserLoginReducer,o=t.BackUpUserRoomReducer,s=this.state.chatUsers.filter((function(e){return e._id!==n.isLoginUser._id}));s.sort((function(e,t){return new Date(t.timestamp)-new Date(e.timestamp)}));var i=[];return r.a.createElement("div",{className:"chat-divider-parent"},s.map((function(t){return i=[],r.a.createElement(B.a,{key:t._id},t.group?r.a.createElement(v.a,{button:!0,className:a.root,onClick:function(){return e.handleCreateRoom(t)},selected:t.roomId===e.state.roomId},t.userGroup.forEach((function(e){i.push(e.username)})),r.a.createElement(M.a,null,r.a.createElement(S.a,{alt:"Remy Sharp",src:"https://spirecapital.com/wp-content/uploads/2016/09/user_group-512.png"})),r.a.createElement(N.a,{primary:t.groupName,secondary:2===i.length?"You,"+i[0]:"You,"+i[0]+" & "+(i.length-2)+" others"||!1})):r.a.createElement(v.a,{button:!0,className:a.root,onClick:function(){return e.handleCreateRoom(t)},selected:t.email===o.backUpUserRoom.OppUser},r.a.createElement(M.a,null,r.a.createElement("img",{alt:t.username,src:t.img,className:a.icon})),r.a.createElement(N.a,{className:a.textParent,primary:t.username,secondary:t.timestamp||"timestamp"})),r.a.createElement(U.a,null))})))}}]),t}(r.a.Component),K=Object(D.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},menuItem:{"&:focus":{backgroundColor:"#d9d9d9","& $primary, & $icon":{color:e.palette.common.white}}},primary:{},textParent:{marginLeft:"8px"},icon:{height:"50px",width:"50px",borderRadius:"50%",border:"none"}}}))(W),_=Object(P.b)((function(e){return{IsUserLoginReducer:e.IsUserLoginReducer,BackUpUserRoomReducer:e.BackUpUserRoomReducer}}),(function(e){return{}}))(K),H=a(5),V=a.n(H),X=a(614),q=a(148),$=a.n(q);var ee=Object(D.a)((function(e){return{margin:{margin:e.spacing()},cssRoot:{color:e.palette.getContrastText($.a[500]),backgroundColor:$.a[500],"&:hover":{backgroundColor:$.a[700]}}}}))((function(e){var t=e.classes;return r.a.createElement(X.a,{variant:"contained",color:"primary",className:V()(t.margin,t.cssRoot),onClick:function(){return e.customButtonClick()},disabled:!e.buttonDisabling},e.buttonText)})),te=function(e){return{type:"LOGIN_USER",payload:e}},ae=a(77),ne=a.n(ae),re=a(625),oe=a(626),se=a(149),ie=a(571);Object(ie.a)({avatar:{margin:10}});var ce=function(e){return console.log(e,"value"),{type:"BACKUP_USER_ROOM",payload:e}},le=function(e){for(var t="=".repeat((4-e.length%4)%4),a=(e+t).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(a),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);return r}("BLKybjg2mofI4blG1oyzrKsZkI-ukpn2veLYHo8te35AdJxiLvIGY48DwVq7xM4Soq9bfqhZVu7dIlOFYjiYxZY");function ue(e,t){var a,n;return ne.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,ne.a.awrap(fetch("https://slashchat.herokuapp.com/saveTokenOnDatabase/",{method:"POST",body:JSON.stringify({loginUser:e,subscription:t}),headers:{"Content-Type":"application/json"}}));case 3:return a=r.sent,r.next=6,ne.a.awrap(a.json());case 6:return n=r.sent,r.abrupt("return",n);case 10:return r.prev=10,r.t0=r.catch(0),r.abrupt("return",r.t0);case 13:case"end":return r.stop()}}),null,null,[[0,10]])}var me=Z()("https://slashchat.herokuapp.com/"),pe={chatBodyMessagesContainer:{display:"flex",flexDirection:"column",position:"relative",height:"100%",overflow:"auto",paddingBottom:"50px"},chatBodyMessagesRight:{display:"flex",flexDirection:"row-reverse",justifyContent:"flex-start"},chatBodyMessagesLeft:{display:"flex",flexDirection:"row",justifyContent:"flex-start"},chatBodyMessagesAvatar:{},chatBodyMessagesBoxRight:{display:"flex",padding:8,justifyContent:"flex-start",alignSelf:"center",borderRadius:20,backgroundColor:"#13c2c2"},chatBodyMessagesBoxLeft:{padding:8,alignSelf:"center ",backgroundColor:"#e8e8e8",borderRadius:20},chatBody:{height:"89%",position:"relative"},chatBodyFooter:{width:"100%",position:"absolute",bottom:0},msgUsernameBox:{display:"flex",flexDirection:"column",marginTop:-3},chatBodyFooterInput:{height:"36px",fontSize:"18px",fontWeight:"500"},chatBodyFooterButton:{height:"36px"},imageAvatar:{height:"40px",width:"40px",borderRadius:"50%",border:"none",margin:10}},he=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={text:"",messageListNew:[]},a.getOppUserTokenFromDatabase=function(e){var t,a;return ne.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ne.a.awrap(fetch("https://slashchat.herokuapp.com/getUserToken/".concat(e)));case 2:return t=n.sent,n.next=5,ne.a.awrap(t.json());case 5:return a=n.sent,n.abrupt("return",a[0]);case 7:case"end":return n.stop()}}))},a.handleMessage=function(e){e.preventDefault();var t=a.props,n=t.IsUserLoginReducer.isLoginUser.username,r=t.BackUpUserRoomReducer.backUpUserRoom,o=r.roomId,s=r.oppUserEmail,i=r.currentUserEmail,c=r.currentUsername,l=r.currentUserImg;me.emit("createMessage",{message:a.state.text,from:n}),fetch("https://slashchat.herokuapp.com/messages/".concat(o),{method:"POST",body:JSON.stringify({roomId:o,messagesList:{message:a.state.text,from:n}}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){a.getOppUserTokenFromDatabase(s).then((function(t){var a,n,r=t.token;a=r,n=Object(f.a)({},e,{roomId:o,currentUserEmail:i,currentUsername:c,currentUserImg:l}),console.log(a,n),fetch("".concat("https://slashchat.herokuapp.com","/notifications/subscribe"),{method:"POST",body:JSON.stringify({subscription:a,payload:n}),headers:{"Content-Type":"application/json"}})})).catch((function(e){return console.log(e)}))})),a.setState({text:""})},a.handleTextChange=function(e){a.setState({text:e.target.value})},a.scrollToBottom=function(){a.messagesEnd.scrollIntoView({behavior:"smooth"})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.BackUpUserRoomReducer,n=t.IsUserLoginReducer;n.isLoginUser&&me.emit("joinRoom",a.backUpUserRoom.roomId),me.on("newMessage",(function(t){e.setState((function(e){return{messageListNew:[].concat(Object(A.a)(e.messageListNew),[{message:t.text,from:t.from}])}}))})),n.isLoginUser&&a.backUpUserRoom.email===n.isLoginUser.email&&G.a.get("https://slashchat.herokuapp.com/messages/"+a.backUpUserRoom.roomId).then((function(t){t.data.length?e.setState({messageListNew:Object(A.a)(t.data[0].messagesList)}):e.setState({messageListNew:[]})})).catch((function(e){console.log(e)})),this.scrollToBottom()}},{key:"componentDidUpdate",value:function(e){var t=this,a=this.props,n=a.BackUpUserRoomAction,r=(a.IsUserLoginReducer.isLoginUser.email,a.getRoomInfo);e.getRoomInfo.roomId!==r.roomId&&(me.emit("joinRoom",r.roomId),n(r),G.a.get("https://slashchat.herokuapp.com/messages/"+r.roomId).then((function(e){e.data.length?t.setState({messageListNew:Object(A.a)(e.data[0].messagesList)}):t.setState({messageListNew:[]})})).catch((function(e){console.log(e)}))),this.scrollToBottom()}},{key:"renderChatBox",value:function(){var e=this.props,t=e.IsUserLoginReducer.isLoginUser,a=t.username,n=(t.email,e.getRoomInfo),o=(n.currentUserEmail,n.currentUsername),s=n.currentUserImg,i=(n.oppUserEmail,n.oppUsername),c=n.oppUserImg;if(this.state.messageListNew.length)return this.state.messageListNew.map((function(e,t){var n=e.from===a;return r.a.createElement("div",{style:n?pe.chatBodyMessagesRight:pe.chatBodyMessagesLeft,key:e+t},r.a.createElement("div",{style:pe.chatBodyMessagesAvatar},r.a.createElement("img",{src:e.from===o?s:c,alt:e.from===o?o:i,style:pe.imageAvatar})),r.a.createElement("div",{style:pe.msgUsernameBox},r.a.createElement("div",{style:{fontSize:12,paddingLeft:5}},e.from),r.a.createElement("div",{style:n?pe.chatBodyMessagesBoxRight:pe.chatBodyMessagesBoxLeft},e.message)))}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:pe.chatBody},r.a.createElement("div",{style:pe.chatBodyMessagesContainer},this.renderChatBox(),r.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}})),r.a.createElement("div",{style:pe.chatBodyFooter},r.a.createElement(re.a,{onSubmit:this.handleMessage,style:{display:"flex"}},r.a.createElement(oe.a,{placeholder:"Enter a message...",style:pe.chatBodyFooterInput,onChange:this.handleTextChange,value:this.state.text,id:"message"}),r.a.createElement(se.a,{htmlType:"submit",type:"primary",style:pe.chatBodyFooterButton,disabled:!this.state.text},"Send.."))))}}]),t}(r.a.Component),ge=Object(P.b)((function(e){return{IsUserLoginReducer:e.IsUserLoginReducer,GetMessagesListReducer:e.GetMessagesListReducer,BackUpUserRoomReducer:e.BackUpUserRoomReducer}}),(function(e){return{BackUpUserRoomAction:function(t){e(ce(t))}}}))(he),de=a(619),fe=a(299),ye=a(284),be=a.n(ye),Le=a(615),Ue=a(282),je=a.n(Ue),we=a(572),Ee=a(283),ve=a.n(Ee),Me=a(630);function Ne(){alert("You clicked the delete icon.")}var Ce=Object(D.a)((function(e){return{root:{display:"flex",justifyContent:"center",flexWrap:"wrap"},chip:{margin:e.spacing()}}}))((function(e){var t=e.classes;return r.a.createElement("span",{className:t.root},e.selectedUserList.map((function(e,a){return r.a.createElement(Me.a,{key:e.username+a,avatar:r.a.createElement(S.a,{alt:"Natacha",src:"https://www.w3schools.com/w3images/avatar2.png"}),label:e.username,onDelete:Ne,className:t.chip})})))})),Oe=a(628),Ie=a(190),ke=a(624),De=Z()("https://slashchat.herokuapp.com/");function Se(e){return r.a.createElement(we.a,Object.assign({direction:"up"},e))}var xe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,chatUsers:[],selectedChats:[],groupName:""},a.handleChangeInputText=function(e){a.setState({groupName:e.target.value})},a.handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1}),a.props.closeParentDropdownList()},a.handleCreateGroup=function(){var e=a.props.IsUserLoginReducer;if(a.state.selectedChats.length){var t={roomIdRandom:Math.random().toString().substring(2,14),groupName:a.state.groupName,group:!0,userGroup:[].concat(Object(A.a)(a.state.selectedChats),[e.isLoginUser]),timestamp:(new Date).toLocaleString()};G.a.post("https://slashchat.herokuapp.com/groupRooms",{userGroupRoom:t}).then((function(e){a.setState({open:!1}),a.props.closeParentDropdownList(),De.emit("newGroupCreated",t)})).catch((function(e){console.log(e)}))}else alert("atleast one user add")},a.handleChange=function(e,t){return function(n){if(a.setState(Object(y.a)({},e,n.target.checked)),n.target.checked)a.setState((function(e){return{selectedChats:[].concat(Object(A.a)(e.selectedChats),[t])}}));else{var r=a.state.selectedChats.filter((function(e){return e._id!==t._id}));a.setState({selectedChats:Object(A.a)(r)})}}},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.IsUserLoginReducer;this.props.setClick(this.handleClickOpen),G.a.get("https://slashchat.herokuapp.com/chatusers").then((function(a){var n=a.data.filter((function(e){return e._id!==t.isLoginUser._id}));e.setState({chatUsers:Object(A.a)(n)})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.chatUsers;return r.a.createElement("div",null,r.a.createElement(Le.a,{fullScreen:!0,open:this.state.open,onClose:this.handleClose,TransitionComponent:Se},r.a.createElement(b.a,{className:t.appBar},r.a.createElement(I.a,null,r.a.createElement(E.a,{className:t.closeStyle,color:"inherit",onClick:this.handleClose,"aria-label":"Close"},r.a.createElement(je.a,null)),r.a.createElement(k.a,{variant:"h6",color:"inherit",className:t.flex},"New Groups"))),r.a.createElement("div",null,r.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off"},r.a.createElement(ke.a,{id:"standard-name",label:"Group Name",style:{width:"100%",marginLeft:40,marginRight:40},className:t.textField,onChange:this.handleChangeInputText,margin:"normal"}))),r.a.createElement("div",null,r.a.createElement(Ce,{selectedUserList:this.state.selectedChats})),r.a.createElement(U.a,null),r.a.createElement(B.a,null,a.map((function(t,a){return r.a.createElement("div",null,r.a.createElement(v.a,{key:t.username+a},r.a.createElement(M.a,null,r.a.createElement(ve.a,{style:{height:35,width:35}})),r.a.createElement(N.a,{primary:t.username,secondary:t.email}),r.a.createElement(Oe.a,{onChange:e.handleChange(t.username,t),color:"primary"})),r.a.createElement(U.a,null))}))),r.a.createElement(Ie.a,{className:t.root,elevation:14,style:{position:"fixed",bottom:0,width:"100%",display:"flex",justifyContent:"center"}},r.a.createElement(ee,{customButtonClick:this.handleCreateGroup,buttonText:"Create Group",buttonDisabling:this.state.groupName&&this.state.selectedChats.length}))))}}]),t}(r.a.Component),Re=Object(D.a)((function(e){return{root:Object(f.a)({},e.mixins.gutters(),{paddingTop:e.spacing(1),paddingBottom:e.spacing(1)}),appBar:{position:"relative"},flex:{marginLeft:18},closeStyle:{marginLeft:-20},container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing(),marginRight:e.spacing(),width:200}}}))(xe),Te=Object(P.b)((function(e){return{IsUserLoginReducer:e.IsUserLoginReducer,BackUpUserRoomReducer:e.BackUpUserRoomReducer}}),(function(e){return{}}))(Re),ze=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={anchorEl:null},a.handleMenu=function(e){a.setState({anchorEl:e.currentTarget})},a.handleClose=function(){a.setState({anchorEl:null})},a.handleNewGroups=function(){console.log("handleNewGroups"),a.clickChild()},a.handleSettings=function(){console.log("handleSettings")},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleCloseParentDropdownList",value:function(){this.setState({anchorEl:null})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.anchorEl,n=Boolean(a);return r.a.createElement("div",{className:t.root},r.a.createElement(E.a,{"aria-owns":n?"menu-appbar":void 0,"aria-haspopup":"true",onClick:this.handleMenu,color:"inherit"},r.a.createElement(be.a,null)),r.a.createElement(fe.a,{className:t.menuDiv,id:"menu-appbar",anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:n,onClose:this.handleClose},r.a.createElement(Te,{setClick:function(t){return e.clickChild=t},closeParentDropdownList:function(){return e.handleCloseParentDropdownList()}}),r.a.createElement(de.a,{onClick:this.handleNewGroups},"New Groups"),r.a.createElement(de.a,{onClick:this.handleSettings},"Settings")))}}]),t}(r.a.Component),Ae=Object(D.a)({root:{flexGrow:1,marginLeft:150},menuDiv:{marginTop:40,marginLeft:-5}})(ze),Be=(a(503),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={mobileOpen:!1,getRoomInfo:{},loginUser:null},a.handleLogoutUser=function(){ue(a.props.IsUserLoginReducer,null),a.props.IsUserLoginAction(null),a.props.history.push("/login")},a.handleDrawerToggle=function(){a.setState((function(e){return{mobileOpen:!e.mobileOpen}}))},a.handleGetRoomId=function(e){a.setState({getRoomInfo:Object(f.a)({},e)})},a.getTargeteduser=function(e){a.setState({targetedUser:e})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e,t=this.props,a=t.IsUserLoginReducer,n=t.history;a.isLoginUser?(e=a,"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.pushManager?t.pushManager.getSubscription().then((function(a){null===a?(console.log("No subscription detected, make a request."),t.pushManager.subscribe({applicationServerKey:le,userVisibleOnly:!0}).then((function(t){console.log("New subscription added."),ue(e,t)})).catch((function(e){"granted"!==Notification.permission?console.log("Permission was not granted."):console.error("An error ocurred during the subscription process.",e)}))):(console.log("Existed subscription detected."),ue(e,a))})):console.log("Push manager unavailable.")})).catch((function(e){console.error("An error ocurred during Service Worker registration.",e)})),this.setState({loginUser:a.isLoginUser.username})):n.replace("/login")}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.theme,n=e.BackUpUserRoomReducer,o=e.IsUserLoginReducer,s=this.state.targetedUser,i=r.a.createElement("div",null,r.a.createElement(v.a,{className:"list-parent",key:"text"},r.a.createElement(M.a,{className:t.avatar},r.a.createElement(z,{loginUser:o})),r.a.createElement(N.a,{className:t.avatarText,primary:this.state.loginUser}),r.a.createElement(Ae,null)),r.a.createElement(U.a,null),r.a.createElement(_,{history:this.props.history,getRoomId:this.handleGetRoomId,targetedUser:this.getTargeteduser}));return r.a.createElement("div",{className:t.root},r.a.createElement(L.a,null),r.a.createElement(b.a,{position:"fixed",className:t.appBar},r.a.createElement(I.a,null,r.a.createElement(E.a,{color:"inherit","aria-label":"Open drawer",onClick:this.handleDrawerToggle,className:t.menuButton},r.a.createElement(O.a,null)),r.a.createElement(k.a,{variant:"h6",color:"inherit",noWrap:!0},s?s.group?s.groupName:s.username:n.backUpUserRoom.groupName||n.backUpUserRoom.userName||"Chat App"),r.a.createElement(k.a,{className:t.LogoutButton},r.a.createElement(ee,{history:this.props.history,customButtonClick:this.handleLogoutUser,buttonText:"Logout",buttonDisabling:"1"})))),r.a.createElement("nav",{className:t.drawer},r.a.createElement(w.a,{smUp:!0,implementation:"css"},r.a.createElement(j.a,{container:this.props.container,variant:"temporary",anchor:"rtl"===a.direction?"right":"left",open:this.state.mobileOpen,onClose:this.handleDrawerToggle,classes:{paper:t.drawerPaper}},i)),r.a.createElement(w.a,{xsDown:!0,implementation:"css"},r.a.createElement(j.a,{classes:{paper:t.drawerPaper},variant:"permanent",open:!0},i))),r.a.createElement("main",{className:t.content},r.a.createElement("div",{style:{marginBottom:10},className:t.toolbar}),r.a.createElement(ge,{getRoomInfo:this.state.getRoomInfo})))}}]),t}(r.a.Component)),Pe=Object(D.a)((function(e){return{root:{display:"flex",height:"100%"},drawer:Object(y.a)({},e.breakpoints.up("sm"),{width:300,flexShrink:0}),appBar:Object(y.a)({marginLeft:300},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(300,"px)")}),menuButton:Object(y.a)({marginLeft:-15},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:300},content:{flexGrow:1},avatarText:{marginLeft:8},avatar:{},LogoutButton:{position:"fixed",right:10}}}),{withTheme:!0})(Be),Ye=Object(P.b)((function(e){return{IsUserLoginReducer:e.IsUserLoginReducer,BackUpUserRoomReducer:e.BackUpUserRoomReducer}}),(function(e){return{IsUserLoginAction:function(t){e(te(t))}}}))(Pe),Ge=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app-container"},r.a.createElement(Ye,{history:this.props.history}))}}]),t}(r.a.Component),Qe=a(623),Ze=a(21),Fe=(a(504),a(111)),Je=function(e){return{type:"SIGNUP_CLICK",payload:e}},We=a(48),Ke=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={loginUser:null},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){e||We.get("https://slashchat.herokuapp.com/login/"+t.email).then((function(e){e.data?e.data.email===t.email&&e.data.password===t.password?(a.setState({loginUser:Object(f.a)({},e.data)}),a.props.IsUserLoginAction(Object(f.a)({},e.data)),a.props.history.replace("/")):alert("No user acount with that email or probably you enter wrong password"):alert("No user acount with that email")})).catch((function(e){console.log(e)}))}))},a.handleSignUpClick=function(){a.props.IsSignUpAction(!0)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.IsUserLoginReducer;e.isLoginUser?this.props.history.replace("/"):e.isSignUpClick&&!e.isLoginUser&&this.props.history.replace("/signup")}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",{className:"login-container"},r.a.createElement(Qe.a,{hoverable:!0,style:{width:300}},r.a.createElement("h1",null,"Login Form"),r.a.createElement(re.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(re.a.Item,null,e("email",{rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]})(r.a.createElement(oe.a,{prefix:r.a.createElement(Ze.a,{type:"mail",theme:"outlined",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email"}))),r.a.createElement(re.a.Item,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(oe.a,{prefix:r.a.createElement(Ze.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(re.a.Item,null,r.a.createElement(se.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in"),"Or"," ",r.a.createElement(Fe.a,{onClick:this.handleSignUpClick,to:"/signup"},"SignUp now !")))))}}]),t}(r.a.Component),_e=re.a.create({name:"normal_login"})(Ke),He=Object(P.b)((function(e){return{IsUserLoginReducer:e.IsUserLoginReducer}}),(function(e){return{IsUserLoginAction:function(t){e(te(t))},IsSignUpAction:function(t){e(Je(t))}}}))(_e),Ve=(a(510),a(629)),Xe=a(622);function qe(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||Ve.a.error("You can only upload JPG/PNG file!");var a=e.size/1024/1024<2;return a||Ve.a.error("Image must smaller than 2MB!"),t&&a}var $e=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!1,imageUrl:null},a.handleChange=function(e){"uploading"!==e.file.status?"done"===e.file.status&&function(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}(e.file.originFileObj,(function(e){return a.setState({imageUrl:e,loading:!1},(function(){a.props.base64UserImage(e)}))})):a.setState({loading:!0})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=r.a.createElement("div",null,r.a.createElement(Ze.a,{type:this.state.loading?"loading":"plus"}),r.a.createElement("div",{className:"ant-upload-text"},"Upload your image")),t=this.state.imageUrl;return r.a.createElement(Xe.a,{name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",beforeUpload:qe,onChange:this.handleChange},t?r.a.createElement("img",{src:t,alt:"avatar",style:{width:"100%"}}):e)}}]),t}(r.a.Component),et=a(48),tt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={base64UserImage:null,imgError:""},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){!e&&a.state.base64UserImage?et.get("https://slashchat.herokuapp.com/signup/"+t.email).then((function(e){e.data.length?alert("user exist"):et.post("https://slashchat.herokuapp.com/signup",{username:t.userName,email:t.email,password:t.password,img:a.state.base64UserImage}).then((function(e){a.props.IsSignUpAction(!1),a.props.history.replace("/login")})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)})):a.setState({imgError:"Please upload image"})}))},a.handleGoToSignUpClick=function(){a.props.IsSignUpAction(!1)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.IsUserLoginReducer,a=e.history;t.isLoginUser||t.isSignUpClick?t.isLoginUser&&a.replace("/"):a.replace("/login")}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,n=a.base64UserImage,o=a.imgError;return r.a.createElement("div",{className:"signup-container"},r.a.createElement("div",{className:"signup-container-inner1"},r.a.createElement("div",{className:"signup-container-inner1-div1"}),r.a.createElement("div",{className:"signup-container-inner1-div2"},r.a.createElement("div",null,r.a.createElement(Fe.a,{onClick:this.handleGoToSignUpClick,to:"/login"},"Go To Log In")))),r.a.createElement("div",{className:"signup-container-inner2"},r.a.createElement(Qe.a,{hoverable:!0,style:{width:300}},r.a.createElement("h1",null,"SignUp Form"),r.a.createElement(re.a,{onSubmit:this.handleSubmit,className:"signup-form"},r.a.createElement(re.a.Item,null,t("userName",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(oe.a,{prefix:r.a.createElement(Ze.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),r.a.createElement(re.a.Item,null,t("email",{rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]})(r.a.createElement(oe.a,{prefix:r.a.createElement(Ze.a,{type:"mail",theme:"outlined",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email"}))),r.a.createElement(re.a.Item,null,t("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(oe.a,{prefix:r.a.createElement(Ze.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center"}},r.a.createElement($e,{base64UserImage:function(t){e.setState({base64UserImage:t})}}),!n&&o&&r.a.createElement("p",{style:{color:"red"}},o)),r.a.createElement(re.a.Item,null,r.a.createElement(se.a,{type:"primary",htmlType:"submit",className:"signup-form-button"},"SignUp"))))))}}]),t}(r.a.Component),at=re.a.create({name:"normal_signup"})(tt),nt=Object(P.b)((function(e){return{IsUserLoginReducer:e.IsUserLoginReducer}}),(function(e){return{IsSignUpAction:function(t){e(Je(t))}}}))(at),rt=Object(d.a)(),ot=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(g.b,{history:rt},r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{exact:!0,path:"/",component:Ge}),r.a.createElement(g.a,{path:"/login",component:He}),r.a.createElement(g.a,{path:"/signup",component:nt})))}}]),t}(r.a.Component),st=a(296),it=a(57),ct=a(189),lt=a(297),ut={isLoginUser:null,isSignUpClick:!1},mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":e=Object(f.a)({},e,{isLoginUser:t.payload});break;case"SIGNUP_CLICK":e=Object(f.a)({},e,{isSignUpClick:t.payload});break;default:return e}return e},pt={backUpUserRoom:{}},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BACKUP_USER_ROOM":console.log(t.payload),e=Object(f.a)({},e,{backUpUserRoom:t.payload});break;default:return e}return e},gt={newGroupCreated:[]},dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_GROUP_CREATED":e=Object(f.a)({},e,{newGroupCreated:[].concat(Object(A.a)(e.newGroupCreated),[t.payload])});break;default:return e}return e},ft={key:"root",storage:a.n(lt).a},yt=Object(it.b)({IsUserLoginReducer:mt,BackUpUserRoomReducer:ht,NewGroupCreatedReducer:dt}),bt=Object(ct.a)(ft,yt),Lt=function(){var e=Object(it.c)(bt);return{store:e,persistor:Object(ct.b)(e)}};s.a.render(r.a.createElement(P.a,{store:Lt().store},r.a.createElement(st.a,{loading:null,persistor:Lt().persistor},r.a.createElement(ot,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/").concat("service-worker.js");i?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):c(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):c(t,e)}))}}()}},[[313,1,2]]]);